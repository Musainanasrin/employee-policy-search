<!DOCTYPE html>
<html>
<head>
  <title>Employee Policy Search</title>
</head>
<body>
  <h2>Employee Policy Search</h2>

  <input type="text" id="searchBox" placeholder="Search policy..." />
  <button onclick="search()">Search</button>

  <div id="results"></div>

  <script>
    const serviceName = "intelligent-search-app";
    const indexName = "employee-index";
    const apiKey = "JTH2ENdPGtr1TbBg2hbN6Ts2nF8fA5wG8IMZhakeOmAzSeCILqiC";

    function search() {
      const query = document.getElementById("searchBox").value;
      const url =
        `https://${serviceName}.search.windows.net/indexes/${indexName}/docs?api-version=2023-07-01&search=${query}`;

      fetch(url, {
        headers: {
          "api-key": apiKey
        }
      })
      .then(response => response.json())
      .then(data => {
        let html = "";
        data.value.forEach(item => {
          html += `<p><b>${item.title}</b><br>${item.content}<br><i>${item.category}</i></p><hr>`;
        });
        document.getElementById("results").innerHTML = html;
      });
    }
  </script>
</body>
</html>
